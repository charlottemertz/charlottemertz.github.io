(function($,sr){var debounce=function(func,threshold,execAsap){var timeout;return function debounced(){var obj=this,args=arguments;function delayed(){if(!execAsap)
func.apply(obj,args);timeout=null;};if(timeout)
clearTimeout(timeout);else if(execAsap)
func.apply(obj,args);timeout=setTimeout(delayed,threshold||100);};}
jQuery.fn[sr]=function(fn){return fn?this.bind('resize',debounce(fn)):this.trigger(sr);};})(jQuery,'smartresize');$(function(){$(window).smartresize(function(){resizeImages();});});$(window).on('load',function(){$('.photoset-item img').each(function(){$(this).data('org-width',$(this)[0].naturalWidth).data('org-height',$(this)[0].naturalHeight);});resizeImages();});function resizeImages(){$('.photoset-row').each(function(){var $pi=$(this).find('.photoset-item'),cWidth=$(this).parent('.photoset').width();var ratios=$pi.map(function(){return $(this).find('img').data('org-width')/$(this).find('img').data('org-height');}).get();var sumRatios=0,sumMargins=0,minRatio=Math.min.apply(Math,ratios);for(var i=0;i<$pi.length;i++){sumRatios+=ratios[i]/minRatio;};$pi.each(function(){sumMargins+=parseInt($(this).css('margin-left'))+parseInt($(this).css('margin-right'));});$pi.each(function(i){var minWidth=(cWidth-sumMargins)/sumRatios;$(this).find('img').height(Math.floor(minWidth/minRatio)).width(Math.floor(minWidth/minRatio)*ratios[i]);});});}